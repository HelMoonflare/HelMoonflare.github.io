<!DOCTYPE html>
<html lang='es'>

<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <link rel='stylesheet' href='style.css'>
  <link src="./images/">
  <!-- <script src="./constants/" defer></script> -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script type="module" src="./modules/cambiarEscena.js" defer></script>
  <title>Aventura JS</title>
</head>

<body>
  <header>
    <h1>Aventura JS</h1>
  </header>
  <main>
    <div id="juego">
      <!-- Escena 0: formulario -->
      <!-- <div id="escena0">
        <form action="">
          <label for="nombre">Nombre:</label>
          <input type="text" required>
          <br>
          <label for="ataque">Ataque:</label>
          <input type="number" value="0">
          <br>
          <label for="defensa">Defensa:</label>
          <input type="number" value="0">
          <br>
          <label for="vida">Vida:</label>
          <input type="number" value="100">
        </form>
        <button id="btnEscena0">Comenzar</button>
      </div>
      <script>
        const regExpNombre = /^[a-zA-Z]{1,20}$/;
        
        const nombre = document.getElementById("nombre");
        const atq = document.getElementById("ataque");
        const def = document.getElementById("defensa");
        const vida = document.getElementById("vida");

        const cantidadTotal = atq.value + def.value + vida.value;

        if (cantidadTotal > 110) {
          alert('La suma de las tres estadísticas no puede ser mayor a 110')
          cantidadTotal = 100
        }

        if (atq.value < 0 || atq.value > 10) {
          alert('El ataque sólo puede tener valores entre 0 y 10')
          atq.value = 0
        }

        if (def.value < 0 || def.value > 10) {

        }

        if (vida.value < 100 || vida.value > 110) {
          alert('La vida total no puede superar los 110 puntos')
          vida.value = 100
        }

      </script> -->

      <!-- Escena 1: Estado inicial del jugador -->
      <div id="escena1">
        <div id="tarjeta-jugador"></div>
        <button id="btnEscena1">Continuar</button>
      </div>


      <!-- Escena 2: Mercado -->
      <div id="escena2" style="display: none;">
        <h2>Mercado de Productos</h2>
        <div class="grid-productos" id="grid-productos">
          <!-- Aquí irán los productos del mercado -->

        </div>
        <div class="cesta-productos" id="cesta-productos">

        </div>
        <button id="btnEscena2">Continuar</button>
      </div>
      <script type="module" src="./modules/agregarAlMercado.js" defer></script>


      <!-- Escena 3: Estado actualizado -->
      <div id="escena3" style="display: none;">
        <h2>Estado del Jugador</h2>
        <p id="ataque-jugador">Ataque: <span id="stat-ataque">0</span></p>
        <p id="defensa-jugador">Defensa: <span id="stat-defensa">0</span></p>
        <p id="vida-jugador">Vida: <span id="stat-vida">0</span></p>

        <button id="btnEscena3">Continuar</button>
      </div>
      <script type="module" src="./modules/actualizarStats.js" defer></script>

      <!-- Escena 4: Enemigos -->
      <div id="escena4" style="display: none;">
        <h2>Enemigos</h2>
        <div id="grid-enemigos">
          <!-- Tarjetas de enemigos -->
        </div>
        <button id="btnEscena4">Continuar</button>
      </div>

      <!-- Escena 5: Batallas -->
      <div id="escena5" style="display: none;">
        <h2>Combate</h2>

        <div id="contenedor-combate">

          <div id="jugador-combate" class="combatiente fuera-izquierda">
            <img id="img-jugador-combate" src="" alt="Jugador">
            <p id="stats-jugador-combate"></p>
          </div>

          <div id="enemigo-combate" class="combatiente fuera-derecha">
            <img id="img-enemigo-combate" src="" alt="Enemigo">
            <p id="stats-enemigo-combate"></p>
          </div>

        </div>

        <button id="btnSiguienteCombate">Siguiente</button>
        <button id="btnEscena5" style="display: none;">Continuar</button>
      </div>

      <!-- Escena 6: Resultado final -->
      <div id="escena6" style="display: none;">
        <div id="final-container" class="animacion-final">
          <h1 id="titulo-final"></h1>
          <p id="puntos-final"></p>
        </div>
        <button id="rankingPorConsola" onclick=resultadosPorConsola()>Resultados por consola</button>
      </div>
      <script>
        function resultadosPorConsola() {
          console.log(getRegistro())
        }

        function getRegistro() {
          const registroJSON = [
            nombre = localStorage.getItem(jugador.nombre),
            puntos = localStorage.getItem(jugador.puntos),
            monedas = localStorage.getItem(jugador.monedas)
          ]

          try {
            if(registroJSON) {
              JSON.parse(registroJSON);
              return registroJSON;
            
            } else {
              return;
            }

          } catch (error) {
            console.error('Error al parsear el registro', error);
            return;
          }

        }
      </script>

  </main>
</body>

</html>